<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memory Card Game - ‡πÄ‡∏Å‡∏°‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡∏ù‡∏∂‡∏Å‡∏™‡∏°‡∏≠‡∏á</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
         :root {
            --primary-color: #6a11cb;
            --secondary-color: #2575fc;
            --accent-color: #ff4b1f;
            --text-color: #fff;
            --card-back: linear-gradient(135deg, #FF9D6C 0%, #BB4E75 100%);
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Kanit', sans-serif;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            /* ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÅ‡∏ö‡∏ö‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß */
            background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            color: var(--text-color);
            padding: 20px;
        }
        
        @keyframes gradientBG {
            0% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
            100% {
                background-position: 0% 50%;
            }
        }
        /* --- ‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏±‡∏ß (Dashboard) --- */
        
        .dashboard {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            padding: 15px 30px;
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
            display: flex;
            align-items: center;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        h1 {
            font-weight: 600;
            font-size: 1.8rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .stats {
            font-size: 1.2rem;
            font-weight: 300;
        }
        
        .stats b {
            font-weight: 600;
            font-size: 1.4rem;
            color: #ffe600;
        }
        /* ‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏î‡∏™‡∏ß‡∏¢‡πÜ */
        
        .btn-restart {
            padding: 10px 25px;
            font-family: 'Kanit', sans-serif;
            font-size: 1rem;
            border: none;
            border-radius: 50px;
            background: #fff;
            color: #e73c7e;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }
        
        .btn-restart:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
            background: #ffe600;
            color: #333;
        }
        /* --- ‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏ô‡πÄ‡∏Å‡∏° --- */
        
        .game-board {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            width: 100%;
            max-width: 450px;
            /* ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡πÉ‡∏´‡∏ç‡πà‡πÄ‡∏Å‡∏¥‡∏ô */
            perspective: 1000px;
        }
        /* --- ‡∏Å‡∏≤‡∏£‡πå‡∏î --- */
        
        .card {
            background-color: transparent;
            width: 100%;
            aspect-ratio: 1 / 1;
            /* ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏µ‡πà‡∏¢‡∏°‡∏à‡∏±‡∏ï‡∏∏‡∏£‡∏±‡∏™‡πÄ‡∏™‡∏°‡∏≠ */
            cursor: pointer;
            perspective: 1000px;
        }
        
        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            /* ‡πÄ‡∏î‡πâ‡∏á‡∏î‡∏∂‡πã‡∏á */
            transform-style: preserve-3d;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
        }
        
        .card.flipped .card-inner {
            transform: rotateY(180deg);
        }
        /* ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏ï‡∏≠‡∏ô‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡∏ñ‡∏π‡∏Å (‡πÄ‡∏î‡πâ‡∏á‡∏Ç‡∏¢‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢‡∏´‡∏≤‡∏¢) */
        
        .card.matched .card-inner {
            animation: matchSuccess 0.8s forwards;
        }
        
        @keyframes matchSuccess {
            0% {
                transform: rotateY(180deg) scale(1);
            }
            50% {
                transform: rotateY(180deg) scale(1.2);
                box-shadow: 0 0 30px #ffe600;
            }
            100% {
                transform: rotateY(180deg) scale(0);
                opacity: 0;
            }
        }
        /* ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏´‡∏•‡∏±‡∏á‡πÑ‡∏û‡πà */
        
        .card-front,
        .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 15px;
            font-size: 3rem;
            border: 2px solid rgba(255, 255, 255, 0.5);
        }
        /* ‡∏´‡∏ô‡πâ‡∏≤‡πÑ‡∏û‡πà (‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û) */
        
        .card-front {
            background-color: white;
            color: #333;
            transform: rotateY(180deg);
            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.1);
        }
        /* ‡∏´‡∏•‡∏±‡∏á‡πÑ‡∏û‡πà (‡∏•‡∏≤‡∏¢‡∏õ‡∏Å) */
        
        .card-back {
            background: var(--card-back);
            color: white;
            font-size: 2rem;
        }
        /* ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÑ‡∏û‡πà */
        
        .card-back::after {
            content: '‚ú®';
            font-size: 2rem;
            opacity: 0.8;
        }
        /* --- Popup ‡∏ï‡∏≠‡∏ô‡∏ä‡∏ô‡∏∞ (Modal) --- */
        
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
            z-index: 999;
        }
        
        .modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }
        
        .modal-content {
            background: white;
            color: #333;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            transform: scale(0.8);
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
        }
        
        .modal-overlay.show .modal-content {
            transform: scale(1);
        }
        
        .modal-content h2 {
            color: #e73c7e;
            margin-bottom: 10px;
            font-size: 2rem;
        }
        
        .modal-content p {
            margin-bottom: 25px;
            font-size: 1.2rem;
            color: #666;
        }
        /* Responsive Mobile */
        
        @media (max-width: 500px) {
            .dashboard {
                flex-direction: column;
                gap: 10px;
                padding: 15px;
                width: 90%;
            }
            .game-board {
                gap: 10px;
                padding: 0 10px;
            }
            .card-front {
                font-size: 2.2rem;
            }
            .card-back::after {
                font-size: 1.5rem;
            }
        }
    </style>
</head>

<body>

    <div class="dashboard">
        <div>
            <h1>Memory Game</h1>
            <div class="stats">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á: <b id="moves">0</b></div>
        </div>
        <button class="btn-restart" onclick="initGame()">üîÑ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</button>
    </div>

    <div class="game-board" id="board">
    </div>

    <div class="modal-overlay" id="winModal">
        <div class="modal-content">
            <h2>üéâ ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢! üéâ</h2>
            <p>‡∏Ñ‡∏∏‡∏ì‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡∏Ñ‡∏£‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô <b id="finalMoves">0</b> ‡∏Ñ‡∏£‡∏±‡πâ‡∏á</p>
            <button class="btn-restart" onclick="closeModalAndRestart()">‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button>
        </div>
    </div>

    <script>
        const board = document.getElementById('board');
        const movesDisplay = document.getElementById('moves');
        const winModal = document.getElementById('winModal');
        const finalMovesDisplay = document.getElementById('finalMoves');

        const items = ['ü¶Ñ', 'ü§ñ', 'üëª', 'üëΩ', 'ü¶ñ', 'üöÄ', 'üçï', 'üíé'];

        let cardsHTML = '';
        let cardsArray = [];
        let hasFlippedCard = false;
        let lockBoard = false;
        let firstCard, secondCard;
        let moves = 0;
        let matchedPairs = 0;

        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÄ‡∏Å‡∏°
        function initGame() {
            moves = 0;
            matchedPairs = 0;
            movesDisplay.innerText = moves;
            board.innerHTML = '';
            winModal.classList.remove('show'); // ‡∏ã‡πà‡∏≠‡∏ô Modal ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà

            [hasFlippedCard, lockBoard] = [false, false];
            [firstCard, secondCard] = [null, null];

            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏π‡πà‡πÑ‡∏û‡πà‡πÅ‡∏•‡∏∞‡∏™‡∏±‡∏ö‡πÑ‡∏û‡πà
            cardsArray = [...items, ...items];
            cardsArray.sort(() => 0.5 - Math.random());

            // ‡∏™‡∏£‡πâ‡∏≤‡∏á HTML
            cardsArray.forEach(emoji => {
                const card = document.createElement('div');
                card.classList.add('card');
                card.dataset.emoji = emoji;

                // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö 3D Flip ‡πÅ‡∏ö‡∏ö‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°
                const cardInner = document.createElement('div');
                cardInner.classList.add('card-inner');

                const front = document.createElement('div');
                front.classList.add('card-front');
                front.innerText = emoji;

                const back = document.createElement('div');
                back.classList.add('card-back');
                // ‡∏´‡∏•‡∏±‡∏á‡πÑ‡∏û‡πà‡πÄ‡∏£‡∏≤‡πÉ‡∏ä‡πâ CSS after content ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô

                cardInner.appendChild(front);
                cardInner.appendChild(back);
                card.appendChild(cardInner);

                card.addEventListener('click', flipCard);
                board.appendChild(card);
            });
        }

        function flipCard() {
            if (lockBoard) return;
            if (this === firstCard) return;

            this.classList.add('flipped');

            if (!hasFlippedCard) {
                hasFlippedCard = true;
                firstCard = this;
                return;
            }

            secondCard = this;
            checkForMatch();
        }

        function checkForMatch() {
            moves++;
            movesDisplay.innerText = moves;

            let isMatch = firstCard.dataset.emoji === secondCard.dataset.emoji;

            isMatch ? disableCards() : unflipCards();
        }

        function disableCards() {
            lockBoard = true;

            // ‡∏£‡∏≠‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡πà‡∏ô‡∏û‡∏•‡∏¥‡∏Å‡πÑ‡∏û‡πà‡∏à‡∏ö‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡πà‡∏ô‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
            setTimeout(() => {
                firstCard.classList.add('matched');
                secondCard.classList.add('matched');

                matchedPairs++;

                // ‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏ä‡∏ô‡∏∞
                if (matchedPairs === items.length) {
                    setTimeout(() => {
                        finalMovesDisplay.innerText = moves;
                        winModal.classList.add('show'); // ‡πÅ‡∏™‡∏î‡∏á Popup ‡∏™‡∏ß‡∏¢‡πÜ
                    }, 800);
                }

                resetBoard();
            }, 500);
        }

        function unflipCards() {
            lockBoard = true;

            setTimeout(() => {
                firstCard.classList.remove('flipped');
                secondCard.classList.remove('flipped');
                resetBoard();
            }, 1000);
        }

        function resetBoard() {
            [hasFlippedCard, lockBoard] = [false, false];
            [firstCard, secondCard] = [null, null];
        }

        function closeModalAndRestart() {
            winModal.classList.remove('show');
            initGame();
        }

        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å
        initGame();
    </script>
</body>

</html>